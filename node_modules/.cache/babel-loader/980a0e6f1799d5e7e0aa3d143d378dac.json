{"ast":null,"code":"var _jsxFileName = \"/Users/davo/Desktop/admin/src/pages/events/feedbacksPage.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Box, CircularProgress } from '@mui/material';\nimport EnhancedTable from '../../layouts/table/table';\nimport useStylesTextFields from '../../assets/makeStyles/textFields/textFields'; // import {UseUserContext} from '../../context/userContext/userContext'\n// import {IUserProps} from '../../context/userContext/userContext.props'\n\nimport SelectField2 from '../../layouts/fields/selectField2';\nimport FeedBackApi from '../../api/feedback';\nimport UsersApi from '../../api/users';\nimport PaginationContainer from '../../layouts/pagination/pagination';\nimport ButtonTranparentBorder from '../../layouts/buttons/buttonTransparentBorder';\nimport ButtonBlue from '../../layouts/buttons/buttonBlue';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst FeedbacksTabs = () => {\n  _s();\n\n  const classesTextFields = useStylesTextFields();\n  const [countPagination, setCountPagination] = useState(0);\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(10);\n  const [isLoading, setIsLoading] = useState(true);\n  const [rows, setRows] = useState([]);\n  const [nameOfUsers, setNameOfUsers] = useState([]);\n  const [eventTitleId, setEventTitleId] = useState(-1);\n  const [eventTitleData, setEventTitleData] = useState([]);\n  const [evaluatorId, setEvaluatorId] = useState(-1);\n  const [isPositiveId, setIsPositiveId] = useState(-1);\n  const [evaluateeId, setEvaluateeId] = useState(-1);\n  const [isPositive, setIsPositive] = useState(-1);\n  const [isLoadingApply, setIsLoadingApply] = useState(false);\n  const [limitData, setLimitData] = useState();\n  const [positiveData] = useState([{\n    name: 'Positive',\n    id: 1\n  }, {\n    name: 'Negative',\n    id: 2\n  }]);\n  useEffect(() => {\n    ;\n\n    (async () => {\n      const resultUsers = await UsersApi.usersList();\n      setNameOfUsers([...resultUsers.data.map(item => ({\n        name: item.firstName,\n        id: item.id\n      }))]);\n    })();\n  }, []);\n  useEffect(() => {\n    ;\n\n    (async () => {\n      setIsLoading(true);\n      const response = await FeedBackApi.filterFeedbacks(eventTitleId, evaluatorId, evaluateeId, isPositiveId, page, pageSize);\n      const updateEventsTitleData = [...response.data.feedbacks.map(item => ({\n        name: item.event.eventTitle,\n        id: item.event.id\n      }))];\n      setEventTitleData(updateEventsTitleData.filter(element => {\n        const isDuplicate = updateEventsTitleData.includes(element.id);\n\n        if (!isDuplicate) {\n          updateEventsTitleData.push(element.id);\n          return true;\n        }\n\n        return false;\n      }));\n      setLimitData(response.data.totalFeedbacksCount);\n      setRows(response.data.feedbacks);\n      setIsLoading(false);\n    })();\n  }, [pageSize, page]);\n  useEffect(() => {\n    if (limitData) {\n      if (pageSize >= limitData) {\n        setCountPagination(1);\n      } else {\n        setCountPagination(Math.ceil(limitData / pageSize));\n      }\n    }\n  }, [pageSize, limitData, page]);\n\n  const handleApply = async () => {\n    setPage(1);\n    setPageSize(10);\n    setIsLoadingApply(true);\n    const response = await FeedBackApi.filterFeedbacks(eventTitleId, evaluatorId, evaluateeId, isPositiveId, 1, 10);\n    setRows(response.data.feedbacks);\n    setLimitData(response.data.totalFeedbacksCount);\n    setIsLoadingApply(false);\n  };\n\n  const handleClear = async () => {\n    setEventTitleId(-1);\n    setEvaluatorId(-1);\n    setEvaluateeId(-1);\n    setIsPositive(-1);\n    setIsPositiveId(-1);\n    setPageSize(10);\n    setPage(1);\n    setIsLoading(true);\n    const response = await FeedBackApi.filterFeedbacks(-1, -1, -1, -1, 1, 10);\n    setLimitData(response.data.totalFeedbacksCount);\n    setRows(response.data.feedbacks);\n    setIsLoading(false);\n  };\n\n  const handleChangePositive = id => {\n    setIsPositive(id);\n    setIsPositiveId(id === 1 ? id : 0);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    component: \"div\",\n    className: \"events-container\",\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      className: \"d-flex flex-wrap mt-2\",\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        className: `${classesTextFields.fieldSize190} mt-18 mr-16`,\n        children: /*#__PURE__*/_jsxDEV(SelectField2, {\n          value: eventTitleId,\n          handleChange: id => setEventTitleId(id),\n          fontWeight: 500,\n          border: false,\n          label: \"Event Title\",\n          data: eventTitleData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        className: `${classesTextFields.fieldSize190} mt-18 mr-16`,\n        children: /*#__PURE__*/_jsxDEV(SelectField2, {\n          value: evaluateeId,\n          handleChange: id => setEvaluateeId(id),\n          fontWeight: 500,\n          border: false,\n          label: \"Evaluatee\",\n          data: nameOfUsers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        className: `${classesTextFields.fieldSize190} mt-18 mr-16`,\n        children: /*#__PURE__*/_jsxDEV(SelectField2, {\n          value: evaluatorId,\n          handleChange: id => setEvaluatorId(id),\n          fontWeight: 500,\n          border: false,\n          label: \"Evaluator\",\n          data: nameOfUsers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        className: `${classesTextFields.fieldSize190} mt-18 mr-16`,\n        children: /*#__PURE__*/_jsxDEV(SelectField2, {\n          value: isPositive,\n          handleChange: handleChangePositive,\n          fontWeight: 500,\n          border: false,\n          label: \"positive/negative\",\n          data: positiveData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      className: \"events-container__button-group d-flex justify-end mt-18\",\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        children: /*#__PURE__*/_jsxDEV(ButtonTranparentBorder, {\n          handleClick: handleClear,\n          title: \"Clear\",\n          width: \"width128\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        className: \"events-container__button-group__apply\",\n        children: !isLoadingApply ? /*#__PURE__*/_jsxDEV(ButtonBlue, {\n          handleClick: handleApply,\n          title: \"Apply\",\n          width: \"width150\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      className: \"mt-94\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        className: \"mt-40\",\n        children: !isLoading && rows.length ? /*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(EnhancedTable, {\n            table: \"feedbacks\",\n            rows: rows\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(PaginationContainer, {\n            limitData: limitData,\n            setPage: setPage,\n            page: page,\n            countPagination: countPagination,\n            pageSize: pageSize,\n            setPageSize: setPageSize\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-center\",\n          children: isLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 28\n          }, this) : 'There is not data'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FeedbacksTabs, \"i0Sc4YwZSzmk+hThiiV8ScQ/cI8=\", false, function () {\n  return [useStylesTextFields];\n});\n\n_c = FeedbacksTabs;\nexport default FeedbacksTabs;\n\nvar _c;\n\n$RefreshReg$(_c, \"FeedbacksTabs\");","map":{"version":3,"sources":["/Users/davo/Desktop/admin/src/pages/events/feedbacksPage.tsx"],"names":["React","useEffect","useState","Box","CircularProgress","EnhancedTable","useStylesTextFields","SelectField2","FeedBackApi","UsersApi","PaginationContainer","ButtonTranparentBorder","ButtonBlue","FeedbacksTabs","classesTextFields","countPagination","setCountPagination","page","setPage","pageSize","setPageSize","isLoading","setIsLoading","rows","setRows","nameOfUsers","setNameOfUsers","eventTitleId","setEventTitleId","eventTitleData","setEventTitleData","evaluatorId","setEvaluatorId","isPositiveId","setIsPositiveId","evaluateeId","setEvaluateeId","isPositive","setIsPositive","isLoadingApply","setIsLoadingApply","limitData","setLimitData","positiveData","name","id","resultUsers","usersList","data","map","item","firstName","response","filterFeedbacks","updateEventsTitleData","feedbacks","event","eventTitle","filter","element","isDuplicate","includes","push","totalFeedbacksCount","Math","ceil","handleApply","handleClear","handleChangePositive","fieldSize190","length"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport {Box, CircularProgress} from '@mui/material'\nimport EnhancedTable from '../../layouts/table/table'\nimport useStylesTextFields from '../../assets/makeStyles/textFields/textFields'\n// import {UseUserContext} from '../../context/userContext/userContext'\n// import {IUserProps} from '../../context/userContext/userContext.props'\nimport SelectField2 from '../../layouts/fields/selectField2'\nimport FeedBackApi from '../../api/feedback'\nimport {ITableFeedbacks} from '../../shared/types/table/table'\nimport UsersApi from '../../api/users'\nimport PaginationContainer from '../../layouts/pagination/pagination'\nimport ButtonTranparentBorder from '../../layouts/buttons/buttonTransparentBorder'\nimport ButtonBlue from '../../layouts/buttons/buttonBlue'\n\nconst FeedbacksTabs = () => {\n  const classesTextFields = useStylesTextFields()\n  const [countPagination, setCountPagination] = useState<number>(0)\n  const [page, setPage] = useState<number>(1)\n  const [pageSize, setPageSize] = useState<number>(10)\n  const [isLoading, setIsLoading] = useState<boolean>(true)\n  const [rows, setRows] = useState<ITableFeedbacks[]>([])\n  const [nameOfUsers, setNameOfUsers] = useState<{name: string; id: number}[]>([])\n  const [eventTitleId, setEventTitleId] = useState<number>(-1)\n  const [eventTitleData, setEventTitleData] = useState<{name: string; id: number}[]>([])\n  const [evaluatorId, setEvaluatorId] = useState<number>(-1)\n  const [isPositiveId, setIsPositiveId] = useState<number>(-1)\n  const [evaluateeId, setEvaluateeId] = useState<number>(-1)\n  const [isPositive, setIsPositive] = useState<number>(-1)\n  const [isLoadingApply, setIsLoadingApply] = useState<boolean>(false)\n  const [limitData, setLimitData] = useState<number | undefined>()\n  const [positiveData] = useState<{name: string; id: number}[]>([\n    {name: 'Positive', id: 1},\n    {name: 'Negative', id: 2},\n  ])\n\n  useEffect(() => {\n    ;(async () => {\n      const resultUsers = await UsersApi.usersList()\n      setNameOfUsers([\n        ...resultUsers.data.map((item: {firstName: string; id: number}) => ({\n          name: item.firstName,\n          id: item.id,\n        })),\n      ])\n    })()\n  }, [])\n\n  useEffect(() => {\n    ;(async () => {\n      setIsLoading(true)\n      const response = await FeedBackApi.filterFeedbacks(\n        eventTitleId,\n        evaluatorId,\n        evaluateeId,\n        isPositiveId,\n        page,\n        pageSize,\n      )\n      const updateEventsTitleData = [\n        ...response.data.feedbacks.map((item: {event: {eventTitle: string; id: number}}) => ({\n          name: item.event.eventTitle,\n          id: item.event.id,\n        })),\n      ]\n\n      setEventTitleData(\n        updateEventsTitleData.filter((element: {id: number}) => {\n          const isDuplicate = updateEventsTitleData.includes(element.id)\n          if (!isDuplicate) {\n            updateEventsTitleData.push(element.id)\n            return true\n          }\n          return false\n        }),\n      )\n\n      setLimitData(response.data.totalFeedbacksCount)\n      setRows(response.data.feedbacks)\n      setIsLoading(false)\n    })()\n  }, [pageSize, page])\n\n  useEffect(() => {\n    if (limitData) {\n      if (pageSize >= limitData) {\n        setCountPagination(1)\n      } else {\n        setCountPagination(Math.ceil(limitData / pageSize))\n      }\n    }\n  }, [pageSize, limitData, page])\n\n  const handleApply = async () => {\n    setPage(1)\n    setPageSize(10)\n    setIsLoadingApply(true)\n    const response = await FeedBackApi.filterFeedbacks(\n      eventTitleId,\n      evaluatorId,\n      evaluateeId,\n      isPositiveId,\n      1,\n      10,\n    )\n    setRows(response.data.feedbacks)\n    setLimitData(response.data.totalFeedbacksCount)\n    setIsLoadingApply(false)\n  }\n\n  const handleClear = async () => {\n    setEventTitleId(-1)\n    setEvaluatorId(-1)\n    setEvaluateeId(-1)\n    setIsPositive(-1)\n    setIsPositiveId(-1)\n    setPageSize(10)\n    setPage(1)\n    setIsLoading(true)\n    const response = await FeedBackApi.filterFeedbacks(-1, -1, -1, -1, 1, 10)\n    setLimitData(response.data.totalFeedbacksCount)\n    setRows(response.data.feedbacks)\n    setIsLoading(false)\n  }\n\n  const handleChangePositive = (id: number) => {\n    setIsPositive(id)\n    setIsPositiveId(id === 1 ? id : 0)\n  }\n\n  return (\n    <Box component=\"div\" className=\"events-container\">\n      <Box className=\"d-flex flex-wrap mt-2\">\n        <Box className={`${classesTextFields.fieldSize190} mt-18 mr-16`}>\n          <SelectField2\n            value={eventTitleId}\n            handleChange={(id) => setEventTitleId(id)}\n            fontWeight={500}\n            border={false}\n            label=\"Event Title\"\n            data={eventTitleData}\n          />\n        </Box>\n        <Box className={`${classesTextFields.fieldSize190} mt-18 mr-16`}>\n          <SelectField2\n            value={evaluateeId}\n            handleChange={(id) => setEvaluateeId(id)}\n            fontWeight={500}\n            border={false}\n            label=\"Evaluatee\"\n            data={nameOfUsers}\n          />\n        </Box>\n        <Box className={`${classesTextFields.fieldSize190} mt-18 mr-16`}>\n          <SelectField2\n            value={evaluatorId}\n            handleChange={(id) => setEvaluatorId(id)}\n            fontWeight={500}\n            border={false}\n            label=\"Evaluator\"\n            data={nameOfUsers}\n          />\n        </Box>\n        <Box className={`${classesTextFields.fieldSize190} mt-18 mr-16`}>\n          <SelectField2\n            value={isPositive}\n            handleChange={handleChangePositive}\n            fontWeight={500}\n            border={false}\n            label=\"positive/negative\"\n            data={positiveData}\n          />\n        </Box>\n      </Box>\n      <Box className=\"events-container__button-group d-flex justify-end mt-18\">\n        <Box>\n          <ButtonTranparentBorder handleClick={handleClear} title=\"Clear\" width=\"width128\" />\n        </Box>\n        <Box className=\"events-container__button-group__apply\">\n          {!isLoadingApply ? (\n            <ButtonBlue handleClick={handleApply} title=\"Apply\" width=\"width150\" />\n          ) : (\n            <CircularProgress />\n          )}\n        </Box>\n      </Box>\n      <Box className=\"mt-94\">\n        <Box className=\"mt-40\">\n          {!isLoading && rows.length ? (\n            <Box>\n              <EnhancedTable table=\"feedbacks\" rows={rows} />\n              <PaginationContainer\n                limitData={limitData}\n                setPage={setPage}\n                page={page}\n                countPagination={countPagination}\n                pageSize={pageSize}\n                setPageSize={setPageSize}\n              />\n            </Box>\n          ) : (\n            <div className=\"d-flex justify-center\">\n              {isLoading ? <CircularProgress /> : 'There is not data'}\n            </div>\n          )}\n        </Box>\n      </Box>\n    </Box>\n  )\n}\n\nexport default FeedbacksTabs\n"]},"metadata":{},"sourceType":"module"}