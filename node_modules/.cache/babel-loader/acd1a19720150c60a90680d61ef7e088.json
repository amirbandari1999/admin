{"ast":null,"code":"var _jsxFileName = \"/Users/davo/Desktop/admin/src/layouts/editUser/EditUser.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Card from '@mui/material/Card';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport Avatar from '@mui/material/Avatar';\nimport SwitchUnstyled from '@mui/base/SwitchUnstyled';\nimport TextField from '@mui/material/TextField';\nimport { useLocation } from 'react-router';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Box } from '@mui/system';\nimport { IconButton } from '@mui/material';\nimport Select from '@mui/material/Select';\nimport MenuItem from '@mui/material/MenuItem';\nimport UserImage from '../../assets/images/userImage';\nimport UserStyle from '../../assets/makeStyles/editUser/UserStyle';\nimport DeactivateUserRed from '../../assets/makeStyles/editUser/DeactivateUserSwitch';\nimport MakeStyles from '../../assets/makeStyles/makeStyles';\nimport UsersApi from '../../api/users';\nimport ErrorModal from '../modal/errorModal';\nimport ButtonBlue from '../buttons/buttonBlue';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditUser = () => {\n  _s();\n\n  const location = useLocation();\n  const navigate = useNavigate();\n  const classesUser = UserStyle();\n  const classes = MakeStyles();\n  const [currency, setCurrency] = useState(0);\n  const [selectedImage, setSelectedImage] = useState(new Blob([], {}));\n  const [usersData, setUsersData] = useState();\n  const {\n    id\n  } = location.state;\n  const [emailDisabled, setEmailDisabled] = useState(true);\n  const [openModalError, setOpenModalError] = useState(false);\n  const [uploadImage, setUploadImage] = useState('');\n  const [showUserImage, setShowUserImage] = useState(false);\n  const [nameValue, setNameValue] = useState('');\n  const [emailValue, setEmailValue] = useState('');\n  const [monthlySalaryValue, setMonthlySalaryValue] = useState('0');\n  const [positionValue, setPositionValue] = useState('');\n  useEffect(() => {\n    ;\n\n    (async () => {\n      const response = await UsersApi.userList(id);\n      setUsersData(response.data);\n    })();\n  }, []);\n  useEffect(() => {\n    if (usersData) {\n      setPositionValue(usersData.position);\n      setMonthlySalaryValue(usersData.monthlySalary);\n      setEmailValue(usersData.email);\n      setNameValue(usersData.firstName);\n      setEmailDisabled(usersData.isActive);\n      setCurrency(usersData.currency);\n    }\n  }, [usersData]);\n  useEffect(() => {\n    if (usersData !== null && usersData !== void 0 && usersData.profileImg) {\n      setShowUserImage(true);\n    } else {\n      setShowUserImage(false);\n    }\n  }, [usersData]);\n\n  const handleCheckedButton = () => {\n    setEmailDisabled(!emailDisabled);\n  };\n\n  const handleUploadImage = event => {\n    if (event.target.files) {\n      setSelectedImage(event.target.files[0]);\n      setUploadImage(event.target.files[0].name);\n      setShowUserImage(true);\n    }\n  };\n\n  const handleSave = () => {\n    try {\n      ;\n\n      (async () => {\n        if (usersData) {\n          const form = new FormData();\n          form.append('FirstName', nameValue);\n          form.append('Email', emailValue);\n          form.append('Position', positionValue);\n          form.append('MonthlySalary', monthlySalaryValue);\n          form.append('LastName', usersData.lastName);\n          form.append('CompanyId', usersData.companyId);\n          form.append('Currency', currency);\n          form.append('IsActive', emailDisabled);\n\n          if (uploadImage) {\n            form.append('ProfileImg', selectedImage);\n          }\n\n          form.append('Role', usersData.role);\n          const response = await UsersApi.updateUser(id, form);\n\n          if (response.status === 200) {\n            navigate('/users'); // window.location.reload()\n          } else {\n            setOpenModalError(true);\n          }\n        }\n      })();\n    } catch (e) {\n      console.log(e, 'error');\n    }\n  };\n\n  const handleCloseErrorModal = () => setOpenModalError(false);\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: `${classesUser.wrapperUserCardContainer}`,\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      className: \"font-size-16 d-flex align-center\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        className: \"text-decoration-none color-black\",\n        to: \"/users\",\n        children: \"Users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        className: \"font-weight-700 line-height-20 ml-6\",\n        children: \" / Edit user\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      className: classesUser.wrapperUserCard,\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        className: classesUser.userCard,\n        children: [!showUserImage ? /*#__PURE__*/_jsxDEV(Box, {\n          className: `${classes.mAuto}`,\n          children: /*#__PURE__*/_jsxDEV(UserImage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Avatar, {\n          alt: \"Remy Sharp\",\n          src: usersData !== null && usersData !== void 0 && usersData.profileImg && !uploadImage ? `https://evaluation-api.azurewebsites.net/${usersData === null || usersData === void 0 ? void 0 : usersData.profileImg}` : URL.createObjectURL(selectedImage),\n          className: classesUser.avatar\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          className: \"d-flex justify-center\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            className: classesUser.uploadBtn,\n            component: \"label\",\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              className: \"text\",\n              children: \"Change picture\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this), ' ', /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              hidden: true,\n              onChange: handleUploadImage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          gutterBottom: true,\n          className: classesUser.nameSurname,\n          component: \"div\",\n          children: nameValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          className: classesUser.checkedButton,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            className: \"mt-4\",\n            onClick: () => handleCheckedButton(),\n            children: /*#__PURE__*/_jsxDEV(SwitchUnstyled, {\n              component: DeactivateUserRed,\n              checked: !emailDisabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: classesUser.subtitle,\n            children: \"Deactivate User\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: classesUser.detailsCard,\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          className: `${classesUser.detailsTitle} d-flex justify-between align-center`,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            className: \"font-weight-700 font-size-20 heading\",\n            children: \"User\\u2019s Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ButtonBlue, {\n            handleClick: handleSave,\n            title: \"SAVE CHANGES\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classesUser.fieldContainer,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              className: \"mb-10 color-dark-grey font-size-12 font-weight-400 ml-18\",\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              className: `${classes.textFieldStyle}`,\n              required: true,\n              id: \"outlined-required\",\n              size: \"small\",\n              onChange: e => setNameValue(e.target.value),\n              value: nameValue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              className: \"mb-10 color-dark-grey font-size-12 font-weight-400 ml-18\",\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              className: `${classes.textFieldStyle}`,\n              required: true,\n              id: \"outlined-required\",\n              size: \"small\",\n              disabled: emailDisabled,\n              onChange: e => setEmailValue(e.target.value),\n              value: emailValue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              className: \"mb-10 color-dark-grey font-size-12 font-weight-400 ml-18\",\n              children: [\"Position\", ' ']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              className: `${classes.textFieldStyle}`,\n              required: true,\n              id: \"outlined-required\",\n              size: \"small\",\n              onChange: e => setPositionValue(e.target.value),\n              value: positionValue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            className: \"create-event-percent-field\",\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              className: \"mb-10 color-dark-grey font-size-12 font-weight-400 ml-18\",\n              children: \"Monthly Salary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              className: \"input-field-percent\",\n              children: [/*#__PURE__*/_jsxDEV(TextField, {\n                className: \"text-field width-100\",\n                required: true,\n                id: \"outlined-required\",\n                size: \"small\",\n                onChange: e => setMonthlySalaryValue(e.target.value),\n                value: monthlySalaryValue\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                className: \"icon-button\",\n                \"aria-label\": \"directions\",\n                children: /*#__PURE__*/_jsxDEV(Select, {\n                  labelId: \"demo-simple-select-label\",\n                  id: \"demo-simple-select\",\n                  value: currency,\n                  label: \"Age\",\n                  size: \"small\",\n                  className: \"max-height-30\",\n                  onChange: e => setCurrency(e.target.value),\n                  children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: 0,\n                    children: \"USD\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 221,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: 1,\n                    children: \"AMD\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ErrorModal, {\n      openModal: openModalError,\n      closeModal: handleCloseErrorModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EditUser, \"DYvihrELjSuqfxECitzeh3p4coA=\", false, function () {\n  return [useLocation, useNavigate];\n});\n\n_c = EditUser;\nexport default EditUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditUser\");","map":{"version":3,"sources":["/Users/davo/Desktop/admin/src/layouts/editUser/EditUser.tsx"],"names":["React","useEffect","useState","Card","Button","Typography","Avatar","SwitchUnstyled","TextField","useLocation","Link","useNavigate","Box","IconButton","Select","MenuItem","UserImage","UserStyle","DeactivateUserRed","MakeStyles","UsersApi","ErrorModal","ButtonBlue","EditUser","location","navigate","classesUser","classes","currency","setCurrency","selectedImage","setSelectedImage","Blob","usersData","setUsersData","id","state","emailDisabled","setEmailDisabled","openModalError","setOpenModalError","uploadImage","setUploadImage","showUserImage","setShowUserImage","nameValue","setNameValue","emailValue","setEmailValue","monthlySalaryValue","setMonthlySalaryValue","positionValue","setPositionValue","response","userList","data","position","monthlySalary","email","firstName","isActive","profileImg","handleCheckedButton","handleUploadImage","event","target","files","name","handleSave","form","FormData","append","lastName","companyId","role","updateUser","status","e","console","log","handleCloseErrorModal","wrapperUserCardContainer","wrapperUserCard","userCard","mAuto","URL","createObjectURL","avatar","uploadBtn","nameSurname","checkedButton","subtitle","detailsCard","detailsTitle","fieldContainer","textFieldStyle","value"],"mappings":";;;AAAA,OAAOA,KAAP,IAA4BC,SAA5B,EAAuCC,QAAvC,QAAsD,OAAtD;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,cAAP,MAA2B,0BAA3B;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAAQC,WAAR,QAA0B,cAA1B;AACA,SAAQC,IAAR,EAAcC,WAAd,QAAgC,kBAAhC;AACA,SAAQC,GAAR,QAAkB,aAAlB;AACA,SAAQC,UAAR,QAAyB,eAAzB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,OAAOC,SAAP,MAAsB,4CAAtB;AACA,OAAOC,iBAAP,MAA8B,uDAA9B;AACA,OAAOC,UAAP,MAAuB,oCAAvB;AACA,OAAOC,QAAP,MAAqB,iBAArB;AAEA,OAAOC,UAAP,MAAuB,qBAAvB;AAEA,OAAOC,UAAP,MAAuB,uBAAvB;;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AACrB,QAAMC,QAAQ,GAAGf,WAAW,EAA5B;AACA,QAAMgB,QAAQ,GAAGd,WAAW,EAA5B;AACA,QAAMe,WAAW,GAAGT,SAAS,EAA7B;AACA,QAAMU,OAAO,GAAGR,UAAU,EAA1B;AACA,QAAM,CAACS,QAAD,EAAWC,WAAX,IAA0B3B,QAAQ,CAAqB,CAArB,CAAxC;AACA,QAAM,CAAC4B,aAAD,EAAgBC,gBAAhB,IAAoC7B,QAAQ,CAAqB,IAAI8B,IAAJ,CAAS,EAAT,EAAa,EAAb,CAArB,CAAlD;AACA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BhC,QAAQ,EAA1C;AACA,QAAM;AAACiC,IAAAA;AAAD,MAAOX,QAAQ,CAACY,KAAtB;AACA,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCpC,QAAQ,CAAsB,IAAtB,CAAlD;AACA,QAAM,CAACqC,cAAD,EAAiBC,iBAAjB,IAAsCtC,QAAQ,CAAU,KAAV,CAApD;AACA,QAAM,CAACuC,WAAD,EAAcC,cAAd,IAAgCxC,QAAQ,CAAS,EAAT,CAA9C;AACA,QAAM,CAACyC,aAAD,EAAgBC,gBAAhB,IAAoC1C,QAAQ,CAAU,KAAV,CAAlD;AACA,QAAM,CAAC2C,SAAD,EAAYC,YAAZ,IAA4B5C,QAAQ,CAAgB,EAAhB,CAA1C;AACA,QAAM,CAAC6C,UAAD,EAAaC,aAAb,IAA8B9C,QAAQ,CAAgB,EAAhB,CAA5C;AACA,QAAM,CAAC+C,kBAAD,EAAqBC,qBAArB,IAA8ChD,QAAQ,CAAgB,GAAhB,CAA5D;AACA,QAAM,CAACiD,aAAD,EAAgBC,gBAAhB,IAAoClD,QAAQ,CAAgB,EAAhB,CAAlD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd;;AAAC,KAAC,YAAY;AACZ,YAAMoD,QAAQ,GAAG,MAAMjC,QAAQ,CAACkC,QAAT,CAAkBnB,EAAlB,CAAvB;AACAD,MAAAA,YAAY,CAACmB,QAAQ,CAACE,IAAV,CAAZ;AACD,KAHA;AAIF,GALQ,EAKN,EALM,CAAT;AAOAtD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIgC,SAAJ,EAAe;AACbmB,MAAAA,gBAAgB,CAACnB,SAAS,CAACuB,QAAX,CAAhB;AACAN,MAAAA,qBAAqB,CAACjB,SAAS,CAACwB,aAAX,CAArB;AACAT,MAAAA,aAAa,CAACf,SAAS,CAACyB,KAAX,CAAb;AACAZ,MAAAA,YAAY,CAACb,SAAS,CAAC0B,SAAX,CAAZ;AACArB,MAAAA,gBAAgB,CAACL,SAAS,CAAC2B,QAAX,CAAhB;AACA/B,MAAAA,WAAW,CAACI,SAAS,CAACL,QAAX,CAAX;AACD;AACF,GATQ,EASN,CAACK,SAAD,CATM,CAAT;AAWAhC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIgC,SAAJ,aAAIA,SAAJ,eAAIA,SAAS,CAAE4B,UAAf,EAA2B;AACzBjB,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD,KAFD,MAEO;AACLA,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD;AACF,GANQ,EAMN,CAACX,SAAD,CANM,CAAT;;AAQA,QAAM6B,mBAAmB,GAAG,MAAM;AAChCxB,IAAAA,gBAAgB,CAAC,CAACD,aAAF,CAAhB;AACD,GAFD;;AAIA,QAAM0B,iBAAiB,GAAIC,KAAD,IAA0C;AAClE,QAAIA,KAAK,CAACC,MAAN,CAAaC,KAAjB,EAAwB;AACtBnC,MAAAA,gBAAgB,CAACiC,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAhB;AACAxB,MAAAA,cAAc,CAACsB,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,EAAsBC,IAAvB,CAAd;AACAvB,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD;AACF,GAND;;AAQA,QAAMwB,UAAU,GAAG,MAAM;AACvB,QAAI;AACF;;AAAC,OAAC,YAAY;AACZ,YAAInC,SAAJ,EAAe;AACb,gBAAMoC,IAAI,GAAG,IAAIC,QAAJ,EAAb;AACAD,UAAAA,IAAI,CAACE,MAAL,CAAY,WAAZ,EAAyB1B,SAAzB;AACAwB,UAAAA,IAAI,CAACE,MAAL,CAAY,OAAZ,EAAqBxB,UAArB;AACAsB,UAAAA,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAwBpB,aAAxB;AACAkB,UAAAA,IAAI,CAACE,MAAL,CAAY,eAAZ,EAA6BtB,kBAA7B;AACAoB,UAAAA,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAwBtC,SAAS,CAACuC,QAAlC;AACAH,UAAAA,IAAI,CAACE,MAAL,CAAY,WAAZ,EAAyBtC,SAAS,CAACwC,SAAnC;AACAJ,UAAAA,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAwB3C,QAAxB;AACAyC,UAAAA,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAwBlC,aAAxB;;AACA,cAAII,WAAJ,EAAiB;AACf4B,YAAAA,IAAI,CAACE,MAAL,CAAY,YAAZ,EAA0BzC,aAA1B;AACD;;AACDuC,UAAAA,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAoBtC,SAAS,CAACyC,IAA9B;AAEA,gBAAMrB,QAAQ,GAAG,MAAMjC,QAAQ,CAACuD,UAAT,CAAoBxC,EAApB,EAAwBkC,IAAxB,CAAvB;;AAEA,cAAIhB,QAAQ,CAACuB,MAAT,KAAoB,GAAxB,EAA6B;AAC3BnD,YAAAA,QAAQ,CAAC,QAAD,CAAR,CAD2B,CAE3B;AACD,WAHD,MAGO;AACLe,YAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACD;AACF;AACF,OAzBA;AA0BF,KA3BD,CA2BE,OAAOqC,CAAP,EAAU;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ,EAAe,OAAf;AACD;AACF,GA/BD;;AAiCA,QAAMG,qBAAqB,GAAG,MAAMxC,iBAAiB,CAAC,KAAD,CAArD;;AAEA,sBACE,QAAC,GAAD;AAAK,IAAA,SAAS,EAAG,GAAEd,WAAW,CAACuD,wBAAyB,EAAxD;AAAA,4BACE,QAAC,GAAD;AAAK,MAAA,SAAS,EAAC,kCAAf;AAAA,8BACE,QAAC,IAAD;AAAM,QAAA,SAAS,EAAC,kCAAhB;AAAmD,QAAA,EAAE,EAAC,QAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAIE,QAAC,GAAD;AAAK,QAAA,SAAS,EAAC,qCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAOE,QAAC,GAAD;AAAK,MAAA,SAAS,EAAEvD,WAAW,CAACwD,eAA5B;AAAA,8BACE,QAAC,IAAD;AAAM,QAAA,SAAS,EAAExD,WAAW,CAACyD,QAA7B;AAAA,mBACG,CAACxC,aAAD,gBACC,QAAC,GAAD;AAAK,UAAA,SAAS,EAAG,GAAEhB,OAAO,CAACyD,KAAM,EAAjC;AAAA,iCACE,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADD,gBAKC,QAAC,MAAD;AACE,UAAA,GAAG,EAAC,YADN;AAEE,UAAA,GAAG,EACDnD,SAAS,SAAT,IAAAA,SAAS,WAAT,IAAAA,SAAS,CAAE4B,UAAX,IAAyB,CAACpB,WAA1B,GACK,4CAA2CR,SAA5C,aAA4CA,SAA5C,uBAA4CA,SAAS,CAAE4B,UAAW,EADtE,GAEIwB,GAAG,CAACC,eAAJ,CAAoBxD,aAApB,CALR;AAOE,UAAA,SAAS,EAAEJ,WAAW,CAAC6D;AAPzB;AAAA;AAAA;AAAA;AAAA,gBANJ,eAgBE,QAAC,GAAD;AAAK,UAAA,SAAS,EAAC,uBAAf;AAAA,iCACE,QAAC,MAAD;AAAQ,YAAA,SAAS,EAAE7D,WAAW,CAAC8D,SAA/B;AAA0C,YAAA,SAAS,EAAC,OAApD;AAAA,oCACE,QAAC,GAAD;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAC6C,GAD7C,eAEE;AAAO,cAAA,IAAI,EAAC,MAAZ;AAAmB,cAAA,MAAM,MAAzB;AAA0B,cAAA,QAAQ,EAAEzB;AAApC;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAhBF,eAsBE,QAAC,UAAD;AAAY,UAAA,YAAY,MAAxB;AAAyB,UAAA,SAAS,EAAErC,WAAW,CAAC+D,WAAhD;AAA6D,UAAA,SAAS,EAAC,KAAvE;AAAA,oBACG5C;AADH;AAAA;AAAA;AAAA;AAAA,gBAtBF,eAyBE,QAAC,GAAD;AAAK,UAAA,SAAS,EAAEnB,WAAW,CAACgE,aAA5B;AAAA,kCACE,QAAC,GAAD;AAAK,YAAA,SAAS,EAAC,MAAf;AAAsB,YAAA,OAAO,EAAE,MAAM5B,mBAAmB,EAAxD;AAAA,mCACE,QAAC,cAAD;AAAgB,cAAA,SAAS,EAAE5C,iBAA3B;AAA8C,cAAA,OAAO,EAAE,CAACmB;AAAxD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE;AAAG,YAAA,SAAS,EAAEX,WAAW,CAACiE,QAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzBF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAiCE,QAAC,IAAD;AAAM,QAAA,SAAS,EAAEjE,WAAW,CAACkE,WAA7B;AAAA,gCACE,QAAC,GAAD;AAAK,UAAA,SAAS,EAAG,GAAElE,WAAW,CAACmE,YAAa,sCAA5C;AAAA,kCACE,QAAC,GAAD;AAAK,YAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,UAAD;AAAY,YAAA,WAAW,EAAEzB,UAAzB;AAAqC,YAAA,KAAK,EAAC;AAA3C;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAKE;AAAK,UAAA,SAAS,EAAE1C,WAAW,CAACoE,cAA5B;AAAA,kCACE,QAAC,GAAD;AAAA,oCACE,QAAC,GAAD;AAAK,cAAA,SAAS,EAAC,0DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE,QAAC,SAAD;AACE,cAAA,SAAS,EAAG,GAAEnE,OAAO,CAACoE,cAAe,EADvC;AAEE,cAAA,QAAQ,MAFV;AAGE,cAAA,EAAE,EAAC,mBAHL;AAIE,cAAA,IAAI,EAAC,OAJP;AAKE,cAAA,QAAQ,EAAGlB,CAAD,IAAO/B,YAAY,CAAC+B,CAAC,CAACZ,MAAF,CAAS+B,KAAV,CAL/B;AAME,cAAA,KAAK,EAAEnD;AANT;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAYE,QAAC,GAAD;AAAA,oCACE,QAAC,GAAD;AAAK,cAAA,SAAS,EAAC,0DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE,QAAC,SAAD;AACE,cAAA,SAAS,EAAG,GAAElB,OAAO,CAACoE,cAAe,EADvC;AAEE,cAAA,QAAQ,MAFV;AAGE,cAAA,EAAE,EAAC,mBAHL;AAIE,cAAA,IAAI,EAAC,OAJP;AAKE,cAAA,QAAQ,EAAE1D,aALZ;AAME,cAAA,QAAQ,EAAGwC,CAAD,IAAO7B,aAAa,CAAC6B,CAAC,CAACZ,MAAF,CAAS+B,KAAV,CANhC;AAOE,cAAA,KAAK,EAAEjD;AAPT;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAZF,eAwBE,QAAC,GAAD;AAAA,oCACE,QAAC,GAAD;AAAK,cAAA,SAAS,EAAC,0DAAf;AAAA,qCACW,GADX;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE,QAAC,SAAD;AACE,cAAA,SAAS,EAAG,GAAEpB,OAAO,CAACoE,cAAe,EADvC;AAEE,cAAA,QAAQ,MAFV;AAGE,cAAA,EAAE,EAAC,mBAHL;AAIE,cAAA,IAAI,EAAC,OAJP;AAKE,cAAA,QAAQ,EAAGlB,CAAD,IAAOzB,gBAAgB,CAACyB,CAAC,CAACZ,MAAF,CAAS+B,KAAV,CALnC;AAME,cAAA,KAAK,EAAE7C;AANT;AAAA;AAAA;AAAA;AAAA,oBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAxBF,eAqCE,QAAC,GAAD;AAAK,YAAA,SAAS,EAAC,4BAAf;AAAA,oCACE,QAAC,GAAD;AAAK,cAAA,SAAS,EAAC,0DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE,QAAC,GAAD;AAAK,cAAA,SAAS,EAAC,qBAAf;AAAA,sCACE,QAAC,SAAD;AACE,gBAAA,SAAS,EAAC,sBADZ;AAEE,gBAAA,QAAQ,MAFV;AAGE,gBAAA,EAAE,EAAC,mBAHL;AAIE,gBAAA,IAAI,EAAC,OAJP;AAKE,gBAAA,QAAQ,EAAG0B,CAAD,IAAO3B,qBAAqB,CAAC2B,CAAC,CAACZ,MAAF,CAAS+B,KAAV,CALxC;AAME,gBAAA,KAAK,EAAE/C;AANT;AAAA;AAAA;AAAA;AAAA,sBADF,eASE,QAAC,UAAD;AAAY,gBAAA,IAAI,EAAC,OAAjB;AAAyB,gBAAA,SAAS,EAAC,aAAnC;AAAiD,8BAAW,YAA5D;AAAA,uCACE,QAAC,MAAD;AACE,kBAAA,OAAO,EAAC,0BADV;AAEE,kBAAA,EAAE,EAAC,oBAFL;AAGE,kBAAA,KAAK,EAAErB,QAHT;AAIE,kBAAA,KAAK,EAAC,KAJR;AAKE,kBAAA,IAAI,EAAC,OALP;AAME,kBAAA,SAAS,EAAC,eANZ;AAOE,kBAAA,QAAQ,EAAGiD,CAAD,IAAOhD,WAAW,CAACgD,CAAC,CAACZ,MAAF,CAAS+B,KAAV,CAP9B;AAAA,0CASE,QAAC,QAAD;AAAU,oBAAA,KAAK,EAAE,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BATF,eAUE,QAAC,QAAD;AAAU,oBAAA,KAAK,EAAE,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAVF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBATF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,kBArCF;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF;AAAA;AAAA;AAAA;AAAA;AAAA,cAjCF;AAAA;AAAA;AAAA;AAAA;AAAA,YAPF,eAkHE,QAAC,UAAD;AAAY,MAAA,SAAS,EAAEzD,cAAvB;AAAuC,MAAA,UAAU,EAAEyC;AAAnD;AAAA;AAAA;AAAA;AAAA,YAlHF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAsHD,CAjND;;GAAMzD,Q;UACad,W,EACAE,W;;;KAFbY,Q;AAkNN,eAAeA,QAAf","sourcesContent":["import React, {ChangeEvent, useEffect, useState} from 'react'\nimport Card from '@mui/material/Card'\nimport Button from '@mui/material/Button'\nimport Typography from '@mui/material/Typography'\nimport Avatar from '@mui/material/Avatar'\nimport SwitchUnstyled from '@mui/base/SwitchUnstyled'\nimport TextField from '@mui/material/TextField'\nimport {useLocation} from 'react-router'\nimport {Link, useNavigate} from 'react-router-dom'\nimport {Box} from '@mui/system'\nimport {IconButton} from '@mui/material'\nimport Select from '@mui/material/Select'\nimport MenuItem from '@mui/material/MenuItem'\nimport UserImage from '../../assets/images/userImage'\nimport UserStyle from '../../assets/makeStyles/editUser/UserStyle'\nimport DeactivateUserRed from '../../assets/makeStyles/editUser/DeactivateUserSwitch'\nimport MakeStyles from '../../assets/makeStyles/makeStyles'\nimport UsersApi from '../../api/users'\nimport {IUsers} from '../../shared/types/user/user'\nimport ErrorModal from '../modal/errorModal'\nimport {LocationStateEditUser} from '../../shared/types/location/location'\nimport ButtonBlue from '../buttons/buttonBlue'\n\nconst EditUser = () => {\n  const location = useLocation()\n  const navigate = useNavigate()\n  const classesUser = UserStyle()\n  const classes = MakeStyles()\n  const [currency, setCurrency] = useState<number | undefined>(0)\n  const [selectedImage, setSelectedImage] = useState<Blob | MediaSource>(new Blob([], {}))\n  const [usersData, setUsersData] = useState<IUsers>()\n  const {id} = location.state as LocationStateEditUser\n  const [emailDisabled, setEmailDisabled] = useState<boolean | undefined>(true)\n  const [openModalError, setOpenModalError] = useState<boolean>(false)\n  const [uploadImage, setUploadImage] = useState<string>('')\n  const [showUserImage, setShowUserImage] = useState<boolean>(false)\n  const [nameValue, setNameValue] = useState<string | Blob>('')\n  const [emailValue, setEmailValue] = useState<string | Blob>('')\n  const [monthlySalaryValue, setMonthlySalaryValue] = useState<string | Blob>('0')\n  const [positionValue, setPositionValue] = useState<string | Blob>('')\n\n  useEffect(() => {\n    ;(async () => {\n      const response = await UsersApi.userList(id)\n      setUsersData(response.data)\n    })()\n  }, [])\n\n  useEffect(() => {\n    if (usersData) {\n      setPositionValue(usersData.position as unknown as Blob)\n      setMonthlySalaryValue(usersData.monthlySalary as unknown as Blob)\n      setEmailValue(usersData.email as unknown as Blob)\n      setNameValue(usersData.firstName as unknown as Blob)\n      setEmailDisabled(usersData.isActive)\n      setCurrency(usersData.currency)\n    }\n  }, [usersData])\n\n  useEffect(() => {\n    if (usersData?.profileImg) {\n      setShowUserImage(true)\n    } else {\n      setShowUserImage(false)\n    }\n  }, [usersData])\n\n  const handleCheckedButton = () => {\n    setEmailDisabled(!emailDisabled)\n  }\n\n  const handleUploadImage = (event: ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files) {\n      setSelectedImage(event.target.files[0])\n      setUploadImage(event.target.files[0].name)\n      setShowUserImage(true)\n    }\n  }\n\n  const handleSave = () => {\n    try {\n      ;(async () => {\n        if (usersData) {\n          const form = new FormData()\n          form.append('FirstName', nameValue)\n          form.append('Email', emailValue)\n          form.append('Position', positionValue)\n          form.append('MonthlySalary', monthlySalaryValue)\n          form.append('LastName', usersData.lastName as unknown as Blob)\n          form.append('CompanyId', usersData.companyId as unknown as Blob)\n          form.append('Currency', currency as unknown as Blob)\n          form.append('IsActive', emailDisabled as unknown as Blob)\n          if (uploadImage) {\n            form.append('ProfileImg', selectedImage as unknown as Blob)\n          }\n          form.append('Role', usersData.role as unknown as Blob)\n\n          const response = await UsersApi.updateUser(id, form)\n\n          if (response.status === 200) {\n            navigate('/users')\n            // window.location.reload()\n          } else {\n            setOpenModalError(true)\n          }\n        }\n      })()\n    } catch (e) {\n      console.log(e, 'error')\n    }\n  }\n\n  const handleCloseErrorModal = () => setOpenModalError(false)\n\n  return (\n    <Box className={`${classesUser.wrapperUserCardContainer}`}>\n      <Box className=\"font-size-16 d-flex align-center\">\n        <Link className=\"text-decoration-none color-black\" to=\"/users\">\n          Users\n        </Link>\n        <Box className=\"font-weight-700 line-height-20 ml-6\"> / Edit user</Box>\n      </Box>\n      <Box className={classesUser.wrapperUserCard}>\n        <Card className={classesUser.userCard}>\n          {!showUserImage ? (\n            <Box className={`${classes.mAuto}`}>\n              <UserImage />\n            </Box>\n          ) : (\n            <Avatar\n              alt=\"Remy Sharp\"\n              src={\n                usersData?.profileImg && !uploadImage\n                  ? `https://evaluation-api.azurewebsites.net/${usersData?.profileImg}`\n                  : URL.createObjectURL(selectedImage)\n              }\n              className={classesUser.avatar}\n            />\n          )}\n          <Box className=\"d-flex justify-center\">\n            <Button className={classesUser.uploadBtn} component=\"label\">\n              <Box className=\"text\">Change picture</Box>{' '}\n              <input type=\"file\" hidden onChange={handleUploadImage} />\n            </Button>\n          </Box>\n          <Typography gutterBottom className={classesUser.nameSurname} component=\"div\">\n            {nameValue}\n          </Typography>\n          <Box className={classesUser.checkedButton}>\n            <Box className=\"mt-4\" onClick={() => handleCheckedButton()}>\n              <SwitchUnstyled component={DeactivateUserRed} checked={!emailDisabled} />\n            </Box>\n            <p className={classesUser.subtitle}>Deactivate User</p>\n          </Box>\n        </Card>\n        <Card className={classesUser.detailsCard}>\n          <Box className={`${classesUser.detailsTitle} d-flex justify-between align-center`}>\n            <Box className=\"font-weight-700 font-size-20 heading\">Userâ€™s Details</Box>\n            <ButtonBlue handleClick={handleSave} title=\"SAVE CHANGES\" />\n          </Box>\n          <div className={classesUser.fieldContainer}>\n            <Box>\n              <Box className=\"mb-10 color-dark-grey font-size-12 font-weight-400 ml-18\">Name</Box>\n              <TextField\n                className={`${classes.textFieldStyle}`}\n                required\n                id=\"outlined-required\"\n                size=\"small\"\n                onChange={(e) => setNameValue(e.target.value)}\n                value={nameValue}\n              />\n            </Box>\n            <Box>\n              <Box className=\"mb-10 color-dark-grey font-size-12 font-weight-400 ml-18\">Email</Box>\n              <TextField\n                className={`${classes.textFieldStyle}`}\n                required\n                id=\"outlined-required\"\n                size=\"small\"\n                disabled={emailDisabled}\n                onChange={(e) => setEmailValue(e.target.value)}\n                value={emailValue}\n              />\n            </Box>\n            <Box>\n              <Box className=\"mb-10 color-dark-grey font-size-12 font-weight-400 ml-18\">\n                Position{' '}\n              </Box>\n              <TextField\n                className={`${classes.textFieldStyle}`}\n                required\n                id=\"outlined-required\"\n                size=\"small\"\n                onChange={(e) => setPositionValue(e.target.value)}\n                value={positionValue}\n              />\n            </Box>\n            <Box className=\"create-event-percent-field\">\n              <Box className=\"mb-10 color-dark-grey font-size-12 font-weight-400 ml-18\">\n                Monthly Salary\n              </Box>\n              <Box className=\"input-field-percent\">\n                <TextField\n                  className=\"text-field width-100\"\n                  required\n                  id=\"outlined-required\"\n                  size=\"small\"\n                  onChange={(e) => setMonthlySalaryValue(e.target.value)}\n                  value={monthlySalaryValue}\n                />\n                <IconButton size=\"small\" className=\"icon-button\" aria-label=\"directions\">\n                  <Select\n                    labelId=\"demo-simple-select-label\"\n                    id=\"demo-simple-select\"\n                    value={currency}\n                    label=\"Age\"\n                    size=\"small\"\n                    className=\"max-height-30\"\n                    onChange={(e) => setCurrency(e.target.value as number)}\n                  >\n                    <MenuItem value={0}>USD</MenuItem>\n                    <MenuItem value={1}>AMD</MenuItem>\n                  </Select>\n                </IconButton>\n              </Box>\n            </Box>\n          </div>\n        </Card>\n      </Box>\n      <ErrorModal openModal={openModalError} closeModal={handleCloseErrorModal} />\n    </Box>\n  )\n}\nexport default EditUser\n"]},"metadata":{},"sourceType":"module"}